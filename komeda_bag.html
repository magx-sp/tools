<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>バッグ カラーシミュレーター</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Interフォントの読み込み -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Interフォントをデフォルトに設定 */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* SVGのパーツにトランジションを追加 */
        #bag-handle, #bag-body, #bag-tag, #bag-logo {
            transition: fill 0.3s ease-in-out;
        }
        /* カラーピッカーのスタイル */
        .color-swatch {
            width: 2.5rem; /* 40px */
            height: 2.5rem; /* 40px */
            border-radius: 9999px; /* full */
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.2s;
            /* Tailwindにない色を直接指定するための準備 */
            background-color: var(--swatch-color);
        }
        /* 白のピッカー用の境界線 */
        .swatch-white {
             border: 1px solid #d1d5db; /* gray-300 */
        }
        /* 選択中のピッカーを示すスタイル */
        .color-swatch.active {
            border-color: #3b82f6; /* blue-500 */
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div class="container mx-auto max-w-4xl bg-white rounded-lg shadow-2xl overflow-hidden">
        <div class="md:flex">
            <!-- 1. バッグのプレビューエリア -->
            <div class="md:w-1/2 p-8 flex items-center justify-center bg-gray-50">
                <!-- SVG -->
                <svg viewBox="0 0 1011.3 1039.3" class="w-full max-w-xs" aria-label="カスタマイズ中のバッグ">
                  <!-- 持ち手グループ -->
                  <g id="bag-handle" fill="#653c07"> <!-- 初期色: Brown -->
                    <path d="M364.6,157.9s-57.6,83.9-82.4,248.2l77.1,3.4s4.2-41.3,2.6-87.9c-1.5-43.6-2.3-116.6-1.4-124.1.3-24.4,4-39.6,4-39.6Z"/>
                    <path d="M647,157.9s57.6,83.9,82.4,248.2l-77.1,3.4s-4.2-41.3-2.6-87.9c1.5-43.6,2.3-116.6,1.4-124.1-.3-24.4-4-39.6-4-39.6Z"/>
                    <path d="M647,157.9c-27.1-51.2-78.8-75.6-141.2-75.6s-114.1,24.5-141.2,75.6c0,0-3.7,15.2-4,39.6,0,0,3.4-34.4,35.6-56.8,31-21.6,61.4-40.9,109.6-40.9s78.7,19.3,109.6,40.9c32.2,22.4,35.6,56.8,35.6,56.8-.3-24.4-4-39.6-4-39.6Z"/>
                    <g>
                      <path d="M359.1,148s-60.5,86.7-87.5,257.9l80.8,3.6s4.6-43.2,3.2-91.8c-1.3-45.3-1.8-121.1-.9-128.8.5-25.2,4.4-40.9,4.4-40.9Z"/>
                      <path d="M652.6,148s60.5,86.7,87.5,257.9l-80.8,3.6s-4.6-43.2-3.2-91.8c1.3-45.3,1.8-121.1.9-128.8-.5-25.2-4.4-40.9-4.4-40.9Z"/>
                      <path d="M652.6,148c-28.4-52.6-82-77.8-146.7-77.8s-118.4,25.1-146.7,77.8c0,0-3.9,15.7-4.4,40.9,0,0,3.7-35.5,37.2-58.6,32.2-22.2,63.8-42,113.9-42s81.7,19.8,113.9,42c33.5,23.1,37.2,58.6,37.2,58.6-.5-25.2-4.4-40.9-4.4-40.9Z"/>
                    </g>
                  </g>
                  <!-- 本体 -->
                  <g id="bag-body" fill="#9b9b9c"> <!-- 初期色: Gray -->
                    <polygon points="80.5 402.7 80.5 827.9 222.2 969.6 789.1 969.6 930.9 827.9 930.9 402.7 80.5 402.7"/>
                  </g>
                  <!-- タグ -->
                  <g id="bag-tag" fill="#ffffff" stroke="#231815" stroke-miterlimit="10"> <!-- 初期色: White -->
                    <rect x="449" y="487.7" width="113.4" height="113.4"/>
                  </g>
                  <!-- ロゴグループ -->
                  <g id="bag-logo" fill="#653c07"> <!-- 初期色: Brown -->
                     <!-- ロゴのパス -->
                     <path d="M482.2,587.1c-1.9-.1-1.9-1.7-1.9-1.7,0,0-.1-1.9,2.2-1.9,0,0-.4.3-.6.8-.1.4,0,1,.5,1.4.6.3,1.1.3,1.6.2.8-.2,1.3-.7,1.3-.7v-2.7h-3c-2.1,0-4.7.9-4.7,3.7,0,4.3,6.1,4.4,7.7,2.3v-2.5s-1.2,1.4-3.2,1.2Z"/>
                     <path d="M505.3,587.8c-.8,0-1.3-.5-1.3-1,0-.5.2-.9.7-1.1.4,0,.7,0,.9.5.2.5-.5.9-.5.9l2.5-1s0-2-2.5-2c-1.1,0-1.9.5-2.4,1.2h-3v-1s0-1.3,1.7-1.3c0,0-.7.3-.7,1,0,.6.4,1,1.5.8v-2.4s-4.5-.8-4.7,2.8h-2.9v-1s0-1.3,1.7-1.3c0,0-.7.3-.7,1,0,.6.4,1,1.5.8v-2.4s-4.5-.8-4.7,2.8h-1.3c-.5-.7-1.3-1.2-2.3-1.2-1.5,0-2.8,1.2-2.8,2.6s1.2,2.6,2.8,2.6,2.7-1.2,2.7-2.6,0-.5,0-.7h.9v3.8s2.2.3,2.2-1.9v-1.8h2.9v3.8s2.2.3,2.2-1.9v-1.8h2.7c0,.3-.1.6-.1.9,0,1.3.8,2.9,3,2.9,1.9,0,2.5-1.3,2.5-1.3l-.7-1.7s-.5,1.1-1.8,1.1ZM488.4,587.5c-.4,0-1-.5-.8-1.4.2-.9,1.1-1.1,1.1-1.1v1.3s.7,0,.7.6c0,.4-.5.6-.9.6Z"/>
                     <path d="M493.4,573.8v6.7h2.6v-4.3l.7-.3v4.6h2.4v-4.6l.8-.4v4.9h2.2v-6.3c0-.5-.6-.3-.6-.3l-2.4,1.1v-.5c0-.5-.6-.3-.6-.3l-2.5,1v-1.4h-2.6Z"/>
                     <path d="M512.3,577.3v3s4.8.9,4.8-3.8-1.6-2.8-3.5-2.8h-4.2v6.7s2.4.5,2.4-2.2v-3.5s2.6-.5,2.6,1.4-1.6,1.6-2.2,1.2Z"/>
                     <path d="M519.4,573.8l-1.9,4.2c-.5,1.1,0,2.8,1.8,2.8s2.2-1.4,2.3-2.1l.9,1.8h2.9l-3.5-6.7h-2.4ZM520.1,578c-.7,0-1-.7-.8-1.3.1-.4.6-1.5.6-1.5l1,2.2c0,.3-.3.7-.8.7Z"/>
                     <path d="M523.5,575.3c.5.6,1.1.5,1.4.2.3-.3.2-.9.2-.9,0,0,.6.1.5.9-.2,1.1-1.3.7-1.3.7.6.7,2.3.6,2.3-.8v-1.7h-3.1v1.6Z"/>
                     <path d="M477.7,573.8v6.7h2.9v-1c.5.8,2.3,1.8,4.2.8v-2.5s-.6.5-1.5.6c-1.2.2-2.4-.4-2.4-1.7s.8-1.5,1.3-1.7c.5-.2.9-.2,1.2-.2-.5.2-.8.6-.8,1.2s.6,1.3,1.3,1.3.9-.3,1.1-.7v-3s-2.6-.6-4.3,1.6v-1.3h-2.9Z"/>
                     <path d="M489.2,580.8c2,0,3.6-1.7,3.6-3.8s-1.6-3.8-3.6-3.8-3.5,1.7-3.5,3.8,1.6,3.8,3.5,3.8ZM488.9,574.4v1.8c.5,0,1,.4,1,1s-.4,1-1,1c-.9,0-1.3-.7-1.4-1.4-.1-1.1.6-2.2,1.4-2.4Z"/>
                     <path d="M503.4,580.4h5.2v-2.9c-.2-.2-.6-.4-.9-.4-.8,0-1.4.6-1.4,1.4s.3,1,.8,1.2c-.1,0-.8,0-.9,0-.8,0-1.4-.6-1.4-1.4s.4-1,.9-1.2c.3-.1.8-.2.8-.2,0,0-.4,0-.7-.1-.5-.2-.9-.5-.9-1.1,0-.6.5-1.1,1.1-1.1s.7,0,1,0c-.3.2-.5.6-.5,1,0,.7.5,1.2,1.2,1.2s.7-.2.9-.4v-2.6h-5.2s-.6,0-.5.7c0,.7.2,1.5.2,2.6s-.1,2.2-.3,2.8c-.2.7.3.6.6.6Z"/>
                     <path d="M532.3,577l-2.2-.9c-1-.4-.7-2.4,1.3-1.7,0,0-.7.3-.6,1.1,0,.5.5,1,1.4,1h1.4v-2.7h-4.6c-1.2,0-1.8,1.1-1.8,1.5s0,1.2,1.3,2c.3.2.9.4,1.3.6.5.3,1.1.7.7,1.4-.5,1.1-2.6.5-2.6.5,1.4-.3,1.3-1.3,1.1-1.7-.3-.4-.8-.6-1.3-.6h-.9v2.9h4.8c.8,0,2.1-.3,2-1.8,0-1.2-1.3-1.6-1.3-1.6Z"/>
                     <path d="M511.1,587.8c-.8,0-1.3-.5-1.3-1,0-.5.2-.9.7-1.1.4,0,.7,0,.9.5.2.5-.5.9-.5.9l1.5-.6,1-.4s0-2-2.5-2c-1.8,0-2.9,1.3-2.9,2.8s.8,2.9,3,2.9c1.9,0,2.5-1.3,2.5-1.3l-.7-1.7s-.5,1.1-1.8,1.1Z"/>
                     <path d="M517.5,587.3c0-.4-.3-.7-.8-.7h-.9v2.3h.4v-1h.4l.6,1h.4l-.7-1c.3,0,.6-.2.6-.6ZM516.5,587.6h-.4v-.7h.5c.2,0,.5,0,.5.4s-.3.4-.6.4Z"/>
                     <path d="M516.5,585.8c-1.1,0-2,.9-2,2s.9,2,2,2,2-.9,2-2-.9-2-2-2ZM516.5,589.5c-.9,0-1.6-.7-1.6-1.7s.7-1.7,1.6-1.7,1.6.7,1.6,1.7-.7,1.7-1.6,1.7Z"/>
                     <path d="M537.2,551.6c-8,9.7-23.8,12.9-35.9,11.9-13.1-.7-21.4-2.1-31.2-15.5-1.4-.7-1.2,2.2-.7,3.4,4.1,5.5,5.8,6.8,7.3,7.9,15.6,12.3,65.9,10.6,66.3-15.9,0-2.1-1.8-4.9-2.5-3.3,1.3,4-2.4,10.4-3.3,11.5ZM541.5,540.9c4.8,18-22,25.7-35.1,24.9-9.9-.2-21.1-.9-29.2-7.1-.5-.4-6.9-4.9-7.3-9.8,12.4,23.2,71.4,20.3,71.6-8.1Z"/>
                     <path d="M541,536.7c-2.7-1.9-5-3.7-7.3-3.2-1.7,3.6-7.4,5.8-11.3,5.7-2.2-.7-.1,4-1.1,5.1-.5,1.2-1.5,2.2-3.1,2.9-.2,0-.3.4-.1.6.3.4,1,1.5.6,2.5-.8,5.5-37.1,6.4-29.5-3.3-4.6-3.9-3.6-10.6-4.3-16.4-5.5.8-9.8,2.8-13.2,6.5-16.1,18.8,14.9,32.2,30.2,31.2,16.7,3.3,53.2-10.1,39.2-31.6ZM543.1,548c-2,10.9-13.6,14.9-22.7,18.2-9.1,3.4-19.9,1.1-29.2.5-8.5-2.8-19.2-6.4-23.1-16-2.2-9.4,6.4-17.9,16-19.3.5,5-.6,12.2,4.1,15.5-4.2,10.9,15.4,7.5,21.6,7.7,5.2-.3,11.3-1.3,9-6.8,3.4-1.5,3.7-4.6,3.2-7.7,4.3.2,10.1-2.1,12.1-5.9,6.2,1,10.1,6.6,8.9,14Z"/>
                     <path d="M520.3,514.3c1.5.2,2.9-1.6,3.8-3.1,1.4-2.2-2-3-2.2-.9,0,1.3-3,2.7-1.6,4.1ZM520.6,513.5c.7-1.3,1.5-1.5,2-3.1,0-.4.5-.6.7-.7,1.2,1.3-1.7,3.6-2.7,4,0,0,0,0,0-.2Z"/>
                     <path d="M513.7,545.6c-3.1.4-8.6,1.7-11.6,1.5-.7,0-.8.4-.4,1,1,2,16,.7,12.1-2.5ZM513.5,546.8c-2.2,1.7-8.4,1.9-11.1,1.1,3.1,0,8.1-1,11.1-1.5.2.1.2.2,0,.4Z"/>
                     <path d="M485.6,514.8c1.4,1,3.1,1.7,4.7,2.2-.3.3-.6.4-1.1.6-.4.1-3.2-1.5-3.2-.5-.3,8.6-.6,18.1,1.9,26.5h0c.9,1.5,2.5,2.3,3.8,3.1-9.6,8,15.7,6.5,19.1,6.1,3.6.4,9.5-2.1,5.7-6,7.4-2.6,1.1-10.4,6.8-9.7,16.7,1.3,14.8-28.3-.5-28.9h0s0,0,0,0h0c-.2,0-.6,0-.7,0-1.5-14.5-47.6-11-36.4,6.7ZM484.5,509.4c2.6-12.8,35-13,37.2-.8,9.6-.4,13.3,10.3,12.6,17.6-1.1,15.6-16.3,4.8-14.3,14.7.4,4.5-5,4.3-3.9,6.2.3.3,1.1,1.3,1,2.3.4,4-30.3,4.7-26.5-1.2.9-1.3,4-.8,1.3-2.4-4.9-2.1-4.6-8.2-4.8-12.8-.2-5.1-.9-10.5-.3-15.6,1.3.5,3.8,1.4,4.4-.6-.7-1.2-2.8-1.1-3.9-2.1-1.8-.9-2.8-3-2.7-5.4Z"/>
                     <path d="M521.8,514.6c-.3,0-.6.3-.7.6,0,0,0,0-.1,0-1-1.8-11.3,3.1-13.8,2.6-3.2.6-10.4.7-12.5-.2-1.1-.2-3.2-.9-3.5.3,1.1,6.9,24.3.9,28.6-1.1.1,4.1.2,8.1.2,12.2.1,1.4-.7,4.4,1.7,4.2,16.5-.5,14-21.8.2-18.6ZM518.9,516.3c-4.6,1.7-24.2,6.9-27,1.7,10.1,2.1,18.2.4,28.4-2.6,0,.2-.7.7-1.4,1ZM528.1,515.5c4.5,2.3,6,10.9,1.5,14.2-2.4,1.5-6.1,3.1-8.8,2.5-.4-2.8,0-6.1-.2-9,.4-2.2-1.1-5.6.5-7.3v-.3c-.1,0,0,.3,0,.3.3,0,.4-.3.6-.5,1.9-.7,4.3-.4,6.3.2Z"/>
                     <polygon points="513.6 525.8 513.6 525.8 513.6 525.8 513.6 525.8"/>
                     <path d="M491.4,514.7c4.2,1.9,33.9,3,24.7-7.6-7.2-3.3-15.2-1.2-22.8-.4-5.5,0-8.5,5-1.9,8ZM507.5,512.7c1-.8,2.7-.7,3.5-1.8-1.2-1.7-4.3,0-5.7-1.5.7-2.7,6.8-1.6,9-.5l-.2-.2c1.8-.1.3,3-.7,3.2-.5.2-.8.5-.7,1-3.2,1-12.6,2.9-14.9.1,3.2,0,6.5.4,9.7-.5Z"/>
                     <path d="M507.3,539.8c2.6-1.3,1.5-7-1.5-3.8-.9,1.2.9,3.1,1.8,1.6.8-1.8-2.3-1.6-.7-.8.7.2-.3,1.1-.6.6-.5-.8.7-2.5,1.6-1.7.6.4.5,2-.2,2.7-.2.3-.8,1.2-.4,1.3Z"/>
                     <path d="M505.5,533.9c1.4-.5-1.2-1.2-.8.7.4.9,2,.4,2.1-.2.8-2-2.5-3.8-3.3-1.2-.8,1.1,2.6,4.3,1.9,2.7-1.7-1-2.2-4,.2-3.5.9.5,1.1,2.6-.3,2.1-.3-.2,0-.7.3-.6Z"/>
                     <path d="M506,544.5c3.8.9,4.2-5.8-1-4-1.4.8-1.8,1.6-3.5,1.4-.7,0-.7-.4-1.2-.4-.3,0-1.2.1-1.6-.1-.6-.5.5-1.4.5-1.9,0-.5-.5-1.1-.3-1.6.3-1.3.5-2.7,1.3-3.8.2-.4,1.1-.6,1.7-.9,1.4-.6,1.7-2.4-.4-2.1-3.5,1.4-1.3-.7-2.8-2.3-.9-.7-2.8-.8-2.9.7-.1.6,0,1.4-.5,1.7-1.2,0-5.3-1.5-2.9,1.5.8.7,2.2.6,2.9,1.3.7.7,1.3,2.6-.2,3.3-1.1.5-2.9,1.5-3.6,2.8-1,1.9-1.6,4.1.6,4.4,4.8,1.1,9.3-.5,13.9.1ZM498.3,540.2c-.7,1.7-1.7,0-2.1-.8.3-.7,1.4-1.7,1-2.6-.7-.8.2-.6.7-.5.2.3,1.3.9.3.9-.3,0,0-.5-.4-.7-.4-.2-.4.2-.4.5-.1,1.2,2.2,2.1.9,3.3ZM496.4,534s0,0,0,0c1.4,0-.2,1.7,0,0ZM496.5,536.6s0,0,0,0c.3,0,.3.5.3.7-.2,0-.5,0-.7,0,.1-.3.2-.5.4-.7ZM499.1,535c-.2.9-2.2,1.2-2.6.3.3,0,1-.5,1.3-.8.1,0,.3.2.6.3.3,0,.8-.2.7.2ZM498.6,534.3c-.9,0,.2-.7.4-.9h0c0,0,0,0,0,0h0c.5.3.3,1.1-.5,1ZM499.3,532.6c.4-.3,3.7-2.5,3.3-.8-.6,1.2-2.5,1.9-3.5,1,0,0,.2-.2.2-.3ZM496.5,529c1.7-.1,3.1,0,2.1,2.3-.5.1-1.6,0-2,0,0-.5-.2-1.7-.1-2.2ZM492.6,532.4c-1.6-2.2,1.6-1.2,2.6-.5.4.2,2.5,2,2.4,1.1-.7-.8-2.2-1.4-.1-1.4,1.7-.4,1.1,1.3.3,2-1.6-.2-3.6-.4-5.2-1.2ZM500.2,544.3c-1,0-10.3,0-8.8-1.2,2.7,1.5,6,.3,8.8,1.2h0ZM499.4,543.7c-16.8.7-2.1-9.1-3.2-5.3-1.5,1.4,3.2,3.9-.8,3-.4-1.1-1.2.1-.5.6,1.7.8,4.5-.9,5.6.8,0,.8-.4,1.1-1.1,1ZM503.4,542.7c-.9,0-1.3.3-.2.7.2,0,.2.1-.1.2-.4.2-2.3.3-2-.7.4-1.2,3.3-.3,3.6-1-.1-.2-.4-.2-.3-.5.6-1.3,2.2-.4,3.3-.8,1,0,.7,1.5.6,2.4.2,2-5.4,1.1-3.2-.4.3-.5-1.1.2-1.6,0Z"/>
                     <path d="M500.7,537.8c-.3-.3-2-.3-1.1.3,1.8,0,3.3,1.8,3.5,3.5,1.4-1.2-1.2-3.3-2.4-3.8Z"/>
                     <path d="M504.6,539.8c.2.5.6.2.5-.3,0-.7-1.2-1.5-1.5-2,.4-1.2,0-2.9-1.5-3-2.1-.3-2.6,3.1-.7,3.5,1.3,0,2.9.1,3.2,1.8ZM503.2,536.4c0,.5-.5,1.2-1.1.9-.9-.4.1-1.9.7-.9,1.2-.8-1.7-1.6-1.6.3.4,1.3-.3.6-.4-.2-.4-1.8,2.7-2.2,2.4,0Z"/>
                     <path d="M490.7,524.8c.4-1.9,1.5,1.2,2.8.6.3,0,1-.6.2-.4-.6.2-1.5-.3-1.8-.8.2-.7,1.5-.6,1.7-1.3,0-.7-2.7,2.2-2.4-.3,0,.1,0,.2,0,.3,0-.1,0-.3,0-.3,0,0,0,0,0,0-.5-.4-1.1,3.5-.4,2.3ZM490.7,524.7s0,0,0-.1c0,0,0,0,0,0,0,0,0,0,0,0ZM493.4,525.3s0,0,0,0c0,0,0,0,0,0,0,0,0,0,0,0ZM492.5,523.7s0,0,0,0h0s0,0,0,0ZM492.6,523.6h0s0,0,0,0c0,0,0,0,0,0,0,0,0,0,0,0ZM492.7,523.6s0,0,0,0c0,0,0,0,0,0h0Z"/>
                     <path d="M491.2,522.6s0,0,0,.1c0,0,0-.1,0-.1Z"/>
                     <path d="M494.8,525.8c1.3,0,2-2.4.3-2.4-.6.3-1.6,2.4-.3,2.4ZM494.4,525.1c.1-1.4,1.8-2,1.2-.1-.2.3-1.3.9-1.2.1Z"/>
                     <path d="M496.6,523.7c0,.4-.5,2.5.3,1.9.3-.1,1-2,1.2-1,0,3,1-.1,1.4.4.2.5.4,1.3,1.1.8.2-.2.2-.3,0-.3-1.2.5-.3-2.2-1.1-1.5-.2.3-.4.7-.7,1-.6.7-.3-.8-.4-1.1-.5-1.1-1.2.9-1.6,1.1,0,0,.2-2.1-.2-1.3ZM496.8,524.5h0s0,0,0,0h0ZM496.7,524.7h0s0,0,0,0h0ZM497.4,524.6s0,0,0,0c0,0,0,0,0,0ZM497.4,524.6s0,0,0-.1c0,0,0,0,0,.1ZM497.6,524.3s0,0,0,0h0s0,0,0,0ZM498.4,525.7s0,0,0,0c0,0,0,0,0,0ZM499.7,525.2h0s0,0,0,0h0ZM499.9,525.5s0,0,0,0c0,0,0,0,0,0ZM496.8,524.3h0c0-.1,0-.2,0-.3,0,0,0,.3,0,.3ZM496.8,524c0,0,0-.1,0-.2,0,0,0,0,0,0h0s0,0,0,0c0,0,0,.1,0,.2,0,0,0,0,0,0Z"/>
                     <path d="M501.5,524.8c.5,0,1.2-.8.7-1.3-1.2-.5-2.1,2.9-.4,2.6.3,0,.8-.4.8-.7,0-.2-.3,0-.4.2-.6.5-1.4-.4-.6-.8ZM502,524c0,.1-.2.2-.3.3,0,0-.2,0-.3,0h0c0-.2.9-1.2.6-.4Z"/>
                     <polygon points="505.2 525.5 505.2 525.5 505.2 525.5 505.2 525.5"/>
                     <path d="M503.3,523.5c-.4.4-.8,2,0,2.3,1.1,0,.9-2.2,1.8-.4,0,0,0,0,0,0,0,0-.1-.1-.1-.2h0c0,0,.1.1.2.1,0,0,0,0,0,0,.3,0,.1-.3,0-.4-.3-.3,0-3.5-.5-2.7.2,1.8-.3.6-1.3,1.1ZM504.7,523.9s0,0,0,0c0,0,0,0,0,0h0ZM503.3,525.5c-.4-.6.3-2.6,1.2-1.5-.2.6-.6,1.2-1.2,1.5h0ZM504.9,525.1s0,0,0,0c0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0h0s0,0,0,0Z"/>
                     <path d="M507.6,523c-2.6-1.5-2.2,4.9-.3,1.3.2-.3.2,1.1.6.9.1,0,.1-.2,0-.2-.4-.6,0-1.4-.3-2ZM506.2,525.2h0c-.4-3.1,2.5-2.1,0,0ZM507.3,524.1s0,0,0,0c0,0,0,0,0,0,0,0,0,0,0,0h0Z"/>
                     <path d="M508.8,522.8c.2-.2.3-.8-.1-.6-.3,0-.3,1-.3,1.3.1,0,.3-.6.4-.7Z"/>
                     <path d="M509.8,524.4c-.2,0-.4-.5-.5,0,.6,1.2,5.5-.5,2.9-1.4-2.8,0-2.4-.7-.1-1.1,0,0-.1,0-.2,0,0,0,0,0,0,0,0,0,.1,0,.1,0,0,0,.1,0,.1,0,0,0,0,0,0,0-.6-.5-1.7.2-2.1.4-1,1.2,1.5,1,2.2,1.1,1.7.4-2.1,1.3-2.4,1ZM512.5,523.9s0,0,0,0h0s0,0,0,0ZM512.5,524s0,0,0,0h0s0,0,0,0ZM511.9,524.2s0,0,0,0h0s0,0,0,0ZM510,522.7s0,0,0,0c0,0,0,0,0,0h0ZM510,522.9h0s0,0,0,0c0,0,0,0,0,0ZM510.1,523s0,0,0,0c0,0,0,0,0,0h0s0,0,0,0ZM510.3,523.1s0,0,0,0c0,0,0,0,0,0h0s0,0,.1,0c0,0,0,0,0,0Z"/>
                     <path d="M512.1,521.9h0s0,0,0,0c0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0Z"/>
                     <path d="M501.3,530c.4.3,1.9-1,1.2-1-.2.3-.5.5-.9.6-1.2.3-.3-2.2.4-1.2h0c0,0,0-.1,0-.1,0,0,0,0,0,0h0s0,0,0,0c0,0,0,0,0,0,.4-.2,0-.7-.5-.7-.8.1-1.2,2-.3,2.2Z"/>
                     <path d="M502.1,528.5h0s0,0,0,0c0,0,0,0,0,0h0Z"/>
                     <path d="M503.7,530.1c1.1-.3,1.7-2.3.1-2.4-.9.2-1.3,2.5-.1,2.4ZM503.5,528.5c1.1-1.5,1.5,1.3,0,1.3-.4-.2,0-1,0-1.3Z"/>
                     <path d="M504.9,528.1c0,.2.7,0,.7.2.2.2,0,1.4.5,1.5.2-1.1-.9-1.5.9-1.8,1.3-.1.3,1.2,1.3,1.6.1-.7-.8-1.7.4-1.7,0,0,.8-.2.3-.3-1.5.4-.6-1.1.3-.8.1-.5-1.2-.3-1.3.2-.2.6-.3.8-1,.9-1.3.2-1-.8,0-.8.9-.3-1.1-.5-1.1.2-.1.7-.6.7-1.1.9Z"/>
                     <path d="M510.7,527.1c-.4-1.3-1.6.5-1.3,1.2-.2,1.2,1.7,1.2,1.7.1,0-.1-.2,0-.3.1-.4.5-1.4.3-1-.4.3-.1,1-.5.9-1ZM510,527.2c.7-.6.2.5-.2.5h0c0,0,.2-.4.2-.5Z"/>
                     <path d="M511.8,527.6c1.6-.6.3-2.5-.4-.6-.2.6-.1,1.7.7,1.8.4,0,1.4-.7.8-.9-.4.7-1.8.7-1.1-.3ZM512.3,526.8c0,0-.2.2-.3.3,0,0-.2.1-.2.1h0c0-.2.1-.5.3-.6,0,0,0,0,.1-.1.1-.2.3,0,.2.2Z"/>
                     <path d="M472.1,546.9h0c0-.4-.8-.3-.7-.5.4-.6,1.5-1.5,1-2,0,0,0,0,0-.1,0,.2-.4,1.7-1,1.4-.2-.4-.2-1.2-.7-1.2,0,0,0,0,0,0,0,0,0,0,0,0,0,.6.8,1.4.2,1.9-.2,0-.9,0-.6.3.6.2,1.4.2,1.9.2ZM470.4,546.4s0,0,0,0c0,0-.2,0-.2,0,0,0,0,0,0,0,0,0,.2,0,.2,0Z"/>
                     <path d="M472.6,544.2c.8,0,.4-1.4-.2-1.6-1.6-.3-1,1.6.2,1.6ZM472.5,544c-.3-.1-.6-.3-.8-.6-.4-.8,1-.7,1,0,0,.1,0,.6-.2.5Z"/>
                     <polygon points="473.3 542.5 473.3 542.5 473.3 542.5 473.3 542.5"/>
                     <path d="M473.3,542.7c0,0,0,0,0-.2,0,0,0,0,0,0,0,0,0,0,0-.1,0,0,0,0,0,0h0s0,0,0,0c0-.3-.4-.8-.4-1.1,0-.5.7.3,1,.1.6-.4-.5-1.3.6-1,.7,0,.6-1.1.3-.5-.4.7-1-.5-1.3-.2-.2.2.6,1.5,0,1.3-1.3-.9-1,.4-.7,1.2-1.7-.9-.4.5.4.4ZM474,541.5s0,0,0,0c0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0ZM473.7,540s0,0,0,0c0,0,0,0,0,.1,0,0,0,0,0,0,0,0,0,0,0,0ZM472.8,541h0s0,0,0,0c0,0,0,0,0,0Z"/>
                     <path d="M472.3,542h0,0s0,0,0,0Z"/>
                     <path d="M472.2,542h0s0,0,0,0h0s0,0,0,0Z"/>
                     <path d="M474.9,539.6c.4.9,1.7,0,1.2-.6-.1,0-.1.2-.2.3-.4.8-1.1.2-.5-.5,0-1.7-1.5,0-.5.8ZM474.9,538.6h0s0,0,0,0h0ZM475.1,538.6c0,0-.2.6-.2.3-.1-.2.2-.9.2-.3ZM474.8,538.7h0s0,0,0,0h0Z"/>
                     <path d="M476.3,539.1c.8.2.7-.7.9-1.4,0,0,1.1.7.6.1-.5-.3-.7-1.5-1.1-1.8-.6-.1,0,.5,0,.8-1.1.5-1.3,1.1-.4,2.2ZM476.9,537.5c0,.3,0,.5-.1.8-.4,1.6-1.2-1.7.1-.8ZM477.7,538.1h0s0,0,0,0c0,0,0,0,0,0h0Z"/>
                     <path d="M478.5,537.9c.4.2.5-1.2.7-1,0,.2.4.8.6.4-.3-.4-.4-.8-.5-1.4-.2-.3-1.3.1-1.4.4,0,.6,0,1.4.6,1.6ZM478.5,536.2c.1,0,.3-.1.5,0,0,.3-.3,1.2-.5,1.4-.1-.4-.5-1.2,0-1.4ZM479.6,537.1s0,0,0,0h0s0,0,0,0Z"/>
                     <path d="M479.9,536h0c.1-.2.8-1.2.2-1-.2,0-.2.8-.2,1Z"/>
                     <path d="M480.9,536.8c.6.2,3.7-.3,2.3-1.2-2.7-.1-1.9-.6,0-.8,0,0-.1,0-.2,0,0,0,0,0,0,0,0,0,.1,0,.1,0,0,0,.1,0,.1,0,0,0,0,0,0,0-.3-.6-2.9.2-2,.8.5.3,1.5,0,2,.5-.4.4-1.8.6-2.3.4-.3-.2-.4.2,0,.3ZM482.4,535.5h0s0,0,0,0h0s0,0,0,0ZM481.4,535.6s0,0,0,0h0s0,0,0,0Z"/>
                     <path d="M483.2,534.8s0,0,0,0c0,0,0,0,0,0,0,0,0,0,0,0h0Z"/>
                  </g>
                </svg>
            </div>

            <!-- 2. カラー選択エリア -->
            <div class="md:w-1/2 p-8">
                <h1 class="text-2xl font-bold text-gray-800 mb-6">カラーシミュレーター</h1>
                
                <!-- 色の定義 (JSで読み取る用 - 非表示) -->
                <div id="color-definitions" class="hidden">
                     <!-- ロゴ 用 追加色 -->
                    <span data-color-name="White" data-color-hex="#ffffff" data-part="logo"></span>
                    <span data-color-name="Black" data-color-hex="#231815" data-part="logo"></span>
                    <!-- 持ち手/ロゴ 用 -->
                    <span data-color-name="Brown" data-color-hex="#653c07" data-part="handle logo"></span>
                    <span data-color-name="Beige" data-color-hex="#9e8e77" data-part="handle logo"></span>
                    <span data-color-name="SteelBlue" data-color-hex="#647b92" data-part="handle logo"></span>
                    <span data-color-name="StoneGray" data-color-hex="#928f8e" data-part="handle logo"></span>
                    <span data-color-name="Cream" data-color-hex="#efe5ca" data-part="handle logo"></span>
                    <!-- 本体 用 -->
                    <span data-color-name="SilverGray" data-color-hex="#9b9b9c" data-part="body"></span>
                    <span data-color-name="DarkGray1" data-color-hex="#4c4948" data-part="body"></span>
                    <span data-color-name="DarkGray2" data-color-hex="#595757" data-part="body"></span>
                    <span data-color-name="DarkBlue1" data-color-hex="#004062" data-part="body"></span>
                    <span data-color-name="DarkBlue2" data-color-hex="#193e6c" data-part="body"></span>
                    <!-- タグ 用 -->
                    <span data-color-name="White" data-color-hex="#ffffff" data-part="tag"></span>
                    <span data-color-name="Black" data-color-hex="#231815" data-part="tag"></span>
                    <!-- タグには本体の色も使える -->
                    <span data-color-name="SilverGray" data-color-hex="#9b9b9c" data-part="tag"></span>
                    <span data-color-name="DarkGray2" data-color-hex="#595757" data-part="tag"></span>
                    <span data-color-name="DarkBlue1" data-color-hex="#004062" data-part="tag"></span>
                    <span data-color-name="DarkBlue2" data-color-hex="#193e6c" data-part="tag"></span>
                </div>

                <!-- パーツごとの選択肢 -->
                <div class="space-y-6">
                    <!-- 持ち手 -->
                    <div>
                        <h2 class="text-lg font-semibold text-gray-700 mb-2">持ち手 (Handle)</h2>
                        <div id="options-handle" class="flex space-x-2 flex-wrap gap-y-2" data-part-id="bag-handle" data-color-group="handle">
                            <!-- JSで生成 -->
                        </div>
                    </div>
                    <!-- バッグ本体 -->
                    <div>
                        <h2 class="text-lg font-semibold text-gray-700 mb-2">本体 (Body)</h2>
                        <div id="options-body" class="flex space-x-2 flex-wrap gap-y-2" data-part-id="bag-body" data-color-group="body">
                             <!-- JSで生成 -->
                        </div>
                    </div>
                    <!-- タグ -->
                    <div>
                        <h2 class="text-lg font-semibold text-gray-700 mb-2">タグ (Tag)</h2>
                        <div id="options-tag" class="flex space-x-2 flex-wrap gap-y-2" data-part-id="bag-tag" data-color-group="tag">
                             <!-- JSで生成 -->
                        </div>
                    </div>
                    <!-- ロゴ -->
                    <div>
                        <h2 class="text-lg font-semibold text-gray-700 mb-2">ロゴ (Logo)</h2>
                        <div id="options-logo" class="flex space-x-2 flex-wrap gap-y-2" data-part-id="bag-logo" data-color-group="logo">
                             <!-- JSで生成 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 1. すべての色定義を取得し、パーツごとに分類
            const allColorDefs = document.querySelectorAll('#color-definitions span');
            const colorsByPart = {};
            allColorDefs.forEach(span => {
                const parts = span.dataset.part.split(' '); // 'handle logo' -> ['handle', 'logo']
                const colorData = {
                    name: span.dataset.colorName,
                    hex: span.dataset.colorHex,
                };
                parts.forEach(part => {
                    if (!colorsByPart[part]) {
                        colorsByPart[part] = [];
                    }
                    // 重複を避ける (タグの色定義などで同じ色が複数回現れる可能性があるため)
                    if (!colorsByPart[part].some(c => c.hex === colorData.hex)) {
                        colorsByPart[part].push(colorData);
                    }
                });
            });

            // 2. ターゲットとなるパーツのコンテナを取得
            const optionContainers = document.querySelectorAll('[data-part-id]'); // data-part-idを持つdivを取得

            // 3. 各パーツのコンテナに対応するカラーピッカーを生成
            optionContainers.forEach(container => {
                const partId = container.dataset.partId;
                const colorGroup = container.dataset.colorGroup; // どの色グループを使うか
                const targetSvgPart = document.getElementById(partId);
                
                if (!targetSvgPart || !colorsByPart[colorGroup]) return; // SVGパーツや色定義がなければスキップ

                const initialFill = targetSvgPart.getAttribute('fill');
                const availableColors = colorsByPart[colorGroup]; // このパーツで使える色を取得

                // コンテナの中身を一旦空にする（更新のため）
                container.innerHTML = ''; 

                availableColors.forEach(color => {
                    const swatch = document.createElement('div');
                    swatch.className = 'color-swatch';
                     // Tailwindにない色は直接style属性で背景色を設定
                    swatch.style.setProperty('--swatch-color', color.hex); 
                    swatch.setAttribute('title', color.name);
                    swatch.dataset.partId = partId;
                    swatch.dataset.colorHex = color.hex;

                     // 白のピッカー用のクラスを追加
                    if (color.hex.toLowerCase() === '#ffffff') {
                        swatch.classList.add('swatch-white');
                    }

                    // 初期色と一致するピッカーをアクティブにする
                    if (initialFill && initialFill.toLowerCase() === color.hex.toLowerCase()) {
                         swatch.classList.add('active');
                    }

                    // 4. クリックイベントリスナー
                    swatch.addEventListener('click', () => {
                        const targetPart = document.getElementById(swatch.dataset.partId);
                        if (targetPart) {
                            targetPart.setAttribute('fill', swatch.dataset.colorHex);
                            // タグ(白)の場合の線処理
                            if (partId === 'bag-tag' && swatch.dataset.colorHex.toLowerCase() === '#ffffff') {
                                targetPart.setAttribute('stroke', '#231815'); 
                            } else if (partId === 'bag-tag') {
                                targetPart.removeAttribute('stroke');
                            }
                        }
                        // Activeクラスの付け替え
                        container.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('active'));
                        swatch.classList.add('active');
                    });

                    container.appendChild(swatch);
                });
            });
        });
    </script>

</body>
</html>

